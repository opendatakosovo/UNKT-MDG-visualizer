<!DOCTYPE html>
<html>
<head>
    <title>Kosovo Mosaic</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

    <!-- D3 charts -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script>
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
	<link rel="stylesheet" type="text/css" href="static/css/style.css">

    <!-- jquery plugin -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="data/output2015.js"></script>
    <!-- Highcharts map JavaScript -->
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/maps/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/maps/modules/map.js"></script>
    <script src="https://code.highcharts.com/maps/modules/data.js"></script>
    <script src="static/highcharts/kv-all.js"></script>

    <style type="text/css">
        #container {
            height: 500px; 
            min-width: 310px; 
            max-width: 800px; 
            margin: 0 auto; 
        }
        .loading {
            margin-top: 10em;
            text-align: center;
            color: gray;
        }

    </style>

    <script type="text/javascript">
        function drawMap(){
            // Prepare demo data
            var data = [
                {
                    "hc-key": "kv-graqanica",
                    "value": 5
                },
                {
                    "hc-key": "kv-gjakove",
                    "value": 1
                },
                {
                    "hc-key": "kv-istog",
                    "value": 2
                },
                {
                    "hc-key": "kv-ranillug",
                    "value": 3
                },
                {
                    "hc-key": "kv-peje",
                    "value": 4
                },
                {
                    "hc-key": "kv-vushtrri",
                    "value": 5
                },
                {
                    "hc-key": "kv-skenderaj",
                    "value": 6
                },
                {
                    "hc-key": "kv-novo-berd",
                    "value": 17
                },
                {
                    "hc-key": "kv-shterpce",
                    "value": 8
                },
                {
                    "hc-key": "kv-drenas",
                    "value": 9
                },
                {
                    "hc-key": "kv-lipjan",
                    "value": 10
                },
                {
                    "hc-key": "kv-leposaviq",
                    "value": 11
                },
                {
                    "hc-key": "kv-fushe-kosove",
                    "value": 12
                },
                {
                    "hc-key": "kv-rahovec",
                    "value": 13
                },
                {
                    "hc-key": "kv-kamenice",
                    "value": 14
                },
                {
                    "hc-key": "kv-zubin-potok",
                    "value": 15
                },
                {
                    "hc-key": "kv-podujeve",
                    "value": 16
                },
                {
                    "hc-key": "kv-dragash",
                    "value": 17
                },
                {
                    "hc-key": "kv-obiliq",
                    "value": 18
                },
                {
                    "hc-key": "kv-suhareke",
                    "value": 19
                },
                {
                    "hc-key": "kv-partesh",
                    "value": 20
                },
                {
                    "hc-key": "kv-kline",
                    "value": 21
                },
                {
                    "hc-key": "kv-ferizaj",
                    "value": 22
                },
                {
                    "hc-key": "kv-malisheve",
                    "value": 23
                },
                {
                    "hc-key": "kv-shtime",
                    "value": 24
                },
                {
                    "hc-key": "kv-mitrovice-veriore",
                    "value": 15
                },
                {
                    "hc-key": "kv-prishtine",
                    "value": 26
                },
                {
                    "hc-key": "kv-gjilan",
                    "value": 27
                },
                {
                    "hc-key": "kv-zvecan",
                    "value": 28
                },
                {
                    "hc-key": "kv-mitrovice",
                    "value": 11
                },
                {
                    "hc-key": "kv-mamushe",
                    "value": 8
                },
                {
                    "hc-key": "kv-prizren",
                    "value": 25
                },
                {
                    "hc-key": "kv-kllokot",
                    "value": 19
                },
                {
                    "hc-key": "kv-hani-i-elezit",
                    "value": 30
                },
                {
                    "hc-key": "kv-viti",
                    "value": 34
                },
                {
                    "hc-key": "kv-kacanik",
                    "value": 25
                },
                {
                    "hc-key": "kv-junik",
                    "value": 5
                },
                {
                    "hc-key": "kv-decan",
                    "value": 8
                }
            ];

            // Initiate the chart
            $('#container').highcharts('Map', {
                title : {
                    text : ''
                },

                mapNavigation: {
                    enabled: true,
                    buttonOptions: {
                        verticalAlign: 'bottom'
                    }
                },

                colorAxis: {
                    min: 0,
                    maxColor: '#73AD21'
                },

                series : [{
                    data : data,
                    mapData: Highcharts.maps['countries/kv/kv-all'],
                    joinBy: 'hc-key',
                    name: 'Random data',
                    states: {
                        hover: {
                            color: 'grey'
                        }
                    },
                    dataLabels: {
                        enabled: true,
                        format: '{point.name}'
                    }
                }]
            });
        }

        function drawBarChart(div, chart_type){
            var obj = {
                "Satisfaction with family medical centers":47.8,
                "Satisfaction with hospitals":45.8,
                "Satisfaction with public health":56.0,
                "Satisfaction with access to and quality of preschool education":76.8,
                "Satisfaction with primary and secondary schools/education":73.8,
                "Satisfaction with waste collection services":55.9,
                "Satisfaction with water supply":60.2,
                "Satisfaction with sewage and sanitation":54.4,
                "Satisfaction with local road maintenance":56.8,
                "Satisfaction with maintenance of inter-municipal roads and highways":61.0,
                "Satisfaction with traffic and parking control and regulation":41.2,
                "Satisfaction with electricity supply":71.5,
                "Satisfaction with phone and postal services":73.6,
                "Satisfaction with environmental protection":46.6,
                "Satisfaction with nature and species conservation":46.4,
                "Satisfaction with cultural activities":47.7,
                "Satisfaction with sports activities":52.2,
                "Satisfaction with youth activities":46.6,
                "Satisfaction with emergency services":73.5,
                "Satisfaction with urban and rural planning":37.0,
                "Satisfaction with social services":34.9,
                "Satisfaction with procedures for tax payment":61.1,
                "Satisfaction with public transport":55.9,
                "Satisfaction with protection of cultural heritage":44.5,
                "Satisfaction with public procurement/tenders":24.3,
                "Satisfaction with recruitment of local staff":24.7,
                "Satisfaction with management of municipal funds":31.9,
                "Satisfaction with public lighting":53.9,
                "Satisfaction with sidewalks":52.4,
                "Satisfaction with municipal parks and squares": 61.9,
                "Satisfaction with Kosovo Police":70.7,
                "Satisfaction with cemetery maintenace":51.5,
                "Satisfaction with the Mayor":54.1,
                "Satisfaction with Municipal Assembly":49.2,
                "Satisfaction with Municipal Administration":61.4
            };

            var array=[]
            for(a in obj){
                array.push([a,obj[a]])
            }
            array.sort(function(a,b){return a[1] - b[1]});
            sorted_array = array.reverse();

            var json_data = {}
            var categories = []
            var data = []

            for(var a=0,b,txt='';b=array[a];++a){
                json_data[b[0]] = b[1];
                categories.push(b[0]);
                data.push(b[1]);
            }

            $('#' + div).highcharts({
                chart: {
                    type: chart_type
                },
                title: {
                    text: 'Historic World Population by Region'
                },
                subtitle: {
                    text: 'Source: <a href="https://en.wikipedia.org/wiki/World_population">Wikipedia.org</a>'
                },
                xAxis: {
                    categories: categories,
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Population (millions)',
                        align: 'high'
                    },
                    labels: {
                        overflow: 'justify'
                    }
                },
                tooltip: {
                    valueSuffix: ' millions'
                },
                plotOptions: {
                    bar: {
                        colorByPoint: true,
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                legend: {
                    borderWidth: 1,
                    shadow: true
                },
                credits: {
                    enabled: false
                },
                series: [{
                    name: 'Year 1800',
                    data: data
                }]
            });
        }

        function drawColumnChart(div, chart_type){
            
            var data = {
                "Pristina": 48.9,
                "Mitrovica": 38.9,
            }
            $('#' + div).highcharts({
                chart: {
                    type: chart_type
                },
                title: {
                    text: 'Historic World Population by Region'
                },
                subtitle: {
                    text: 'Source: <a href="https://en.wikipedia.org/wiki/World_population">Wikipedia.org</a>'
                },
                xAxis: {
                    categories: ["Pristina","Mitrovica", "Mitrovica South","Mitrovica North","Gjilan","Peje","Prizren","Gjakove","Podujeve","Vushtrri","Skenderaj","Leposaviq",
                                 "Kline","Istog","Decan","Dragash","Suhareke","Rahovec","Viti","Kamenice","Lipjan","Shtime","Ferizaj","Kacanik","Fushe Kosove","Obiliq","Novoberda",
                                 "Zubin Potok","Shterpce","Zvecan","Gliogovc","Malisheve","Junik","Mamushe","Hani I Elezit","Gracanica","Ranillug","Partesh","Kllokot","Kosovo"],
                    title: {
                        text: null
                    }
                },
                yAxis: {
                    min: 0,
                    title: {
                        text: 'Population (millions)',
                        align: 'high'
                    },
                    labels: {
                        overflow: 'justify'
                    }
                },
                tooltip: {
                    valueSuffix: ' %'
                },
                plotOptions: {
                    column: {
                        colorByPoint: true,
                        dataLabels: {
                            enabled: true
                        }
                    }
                },
                legend: {
                    borderWidth: 1,
                    shadow: true
                },
                credits: {
                    enabled: false
                },
                series: [{
                    name: 'Year 1800',
                    data: [48.9,38.9,35.5,28.7,32.6,39.1,67.4,43.8,32.0,56.2,43.7,47.9,59.5,39.3,79.3,23.6,76.2,68.0,52.5,59.3,41.0,24.4,36.2,63.3,44.2,38.5,19.1,49.0,56.0,41.4,40.1,20.1,74.6,67.2,25.6,87.0,80.3,85.7,47.8]
                }]
            });
        }

        $(document).ready(function(){
            var json_obj = jsonObject()
            var muni = "Kosovo";
			var year = '2015'
			start(year, muni);
            var obj = {
                "Satisfaction with family medical centers":47.8,
                "Satisfaction with hospitals":45.8,
                "Satisfaction with public health":56.0,
                "Satisfaction with access to and quality of preschool education":76.8,
                "Satisfaction with primary and secondary schools/education":73.8,
                "Satisfaction with waste collection services":55.9,
                "Satisfaction with water supply":60.2,
                "Satisfaction with sewage and sanitation":54.4,
                "Satisfaction with local road maintenance":56.8,
                "Satisfaction with maintenance of inter-municipal roads and highways":61.0,
                "Satisfaction with traffic and parking control and regulation":41.2,
                "Satisfaction with electricity supply":71.5,
                "Satisfaction with phone and postal services":73.6,
                "Satisfaction with environmental protection":46.6,
                "Satisfaction with nature and species conservation":46.4,
                "Satisfaction with cultural activities":47.7,
                "Satisfaction with sports activities":52.2,
                "Satisfaction with youth activities":46.6,
                "Satisfaction with emergency services":73.5,
                "Satisfaction with urban and rural planning":37.0,
                "Satisfaction with social services":34.9,
                "Satisfaction with procedures for tax payment":61.1,
                "Satisfaction with public transport":55.9,
                "Satisfaction with protection of cultural heritage":44.5,
                "Satisfaction with public procurement/tenders":24.3,
                "Satisfaction with recruitment of local staff":24.7,
                "Satisfaction with management of municipal funds":31.9,
                "Satisfaction with public lighting":53.9,
                "Satisfaction with sidewalks":52.4,
                "Satisfaction with municipal parks and squares": 61.9,
                "Satisfaction with Kosovo Police":70.7,
                "Satisfaction with cemetery maintenace":51.5,
                "Satisfaction with the Mayor":54.1,
                "Satisfaction with Municipal Assembly":49.2,
                "Satisfaction with Municipal Administration":61.4
            };
            for (key in obj){
                $("#indicator-select").append("<option value='"+key+"'>"+key+"</option>");
            }
            drawMap();
            // drawBarChart("bar-chart", "bar");
            drawColumnChart("column-chart", "column");
        })
    </script>
</head>
<body>
    <div class="container-fluid">
        <div class="row" style="margin-top: 10px;">
            <div class="col-md-2">
            </div>
            <div class="col-md-3">
                <select id="indicator-select" class="form-control">
                </select>
                <br>
            </div>
            <div class="col-md-1">
                <button class="btn btn-success" style="width:100%">2015</button>
                <br>
            </div>
            <div class="col-md-1">
                <button class="btn btn-success" style="width:100%">2012</button>
                <br>
            </div>
            <div class="col-md-1">
                <button class="btn btn-success" style="width:100%">2009</button>
                <br>
            </div>
            <div class="col-md-1">
                <button class="btn btn-success" style="width:100%">2006</button>
                <br>
            </div>
            <div class="col-md-1">
                <button class="btn btn-success" style="width:100%">2003</button>
                <br>
            </div>
            <div class="col-md-2">
            </div>
        </div>
        <br>
        <div class="row">
            <div class="col-md-8">
                <div id="container" style="height:550px;"></div>
            </div>
            <div class="col-md-4" style="height:550px;">
                	<br>
                	<br>
                	<br>
                <div id="aster-chart">
					<script src="static/js/draw.js" ></script>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div id="column-chart" style="height:400px;"></div>
            </div>
        </div>
    </div>
</body>
</html>